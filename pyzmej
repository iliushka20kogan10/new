import pygame as pg
import random as r

pg.init()

disp = pg.display.set_mode((800, 480))
pg.display.set_caption("Zmejka")
pg.display.update()

clock = pg.time.Clock()

colors = {
    "black": (0, 0, 0),
    "red": (255, 0, 0),
    "blue": (0, 0, 255),
    "green": (0, 255, 0),
    "white": (255, 255, 255)
}
gameover = False
direction = "right"
x = 200
y = 320
ax = 400
ay = 120
score = 0
font = pg.font.Font(None, 40)
snake = [[x, y]]

while not gameover:
    clock.tick(5)
    for event in pg.event.get():
        if event.type == pg.QUIT:
            print('"Zmejka" closed')
            gameover = True
        if event.type == pg.KEYDOWN:
            if event.key == pg.K_LEFT:
                direction = "left"
            if event.key == pg.K_RIGHT:
                direction = "right"
            if event.key == pg.K_UP:
                direction = "up"
            if event.key == pg.K_DOWN:
                direction = "down"
    if direction == "left":
        x -= 40
    if direction == "right":
        x += 40
    if direction == "up":
        y -= 40
    if direction == "down":
        y += 40
    for i in range(len(snake)-1):
        snake[i] = snake[i+1]
    snake[-1] = [x, y]
    if x == ax and y == ay:
        snake.insert(0, snake[0])
        score += 1
        while [ax, ay] in snake:
            ax = r.randint(1, 10) * 40
            ay = r.randint(1, 10) * 40
    disp.fill(colors['black'])
    for i in snake:
        pg.draw.rect(disp, colors["green"], [i[0], i[1], 40, 40])
    pg.draw.rect(disp, colors["red"], [ax, ay, 40, 40])
    message = font.render(f"Score: {score}", True, colors["white"])
    disp.blit(message, [0, 0])
    pg.display.update()

pg.quit()
quit()
